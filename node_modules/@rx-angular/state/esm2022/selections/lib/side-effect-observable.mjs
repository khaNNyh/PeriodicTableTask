import { merge, queueScheduler, Subject, } from 'rxjs';
import { mergeAll, observeOn } from 'rxjs/operators';
export function createSideEffectObservable(stateObservables = new Subject(), scheduler = queueScheduler) {
    const effects$ = merge(stateObservables.pipe(mergeAll(), scheduler ? observeOn(scheduler) : (o$) => o$));
    function nextEffectObservable(effect$) {
        stateObservables.next(effect$);
    }
    function subscribe() {
        return effects$.subscribe();
    }
    return {
        effects$,
        nextEffectObservable,
        subscribe,
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2lkZS1lZmZlY3Qtb2JzZXJ2YWJsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvc3RhdGUvc2VsZWN0aW9ucy9zcmMvbGliL3NpZGUtZWZmZWN0LW9ic2VydmFibGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLEtBQUssRUFFTCxjQUFjLEVBRWQsT0FBTyxHQUdSLE1BQU0sTUFBTSxDQUFDO0FBQ2QsT0FBTyxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUVyRCxNQUFNLFVBQVUsMEJBQTBCLENBQ3hDLG1CQUFtQixJQUFJLE9BQU8sRUFBaUIsRUFDL0MsWUFBa0MsY0FBYztJQU1oRCxNQUFNLFFBQVEsR0FBa0IsS0FBSyxDQUNuQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQ25CLFFBQVEsRUFBRSxFQUNWLFNBQVMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUM5QyxDQUNGLENBQUM7SUFFRixTQUFTLG9CQUFvQixDQUFDLE9BQXNCO1FBQ2xELGdCQUFnQixDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBRUQsU0FBUyxTQUFTO1FBQ2hCLE9BQU8sUUFBUSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQzlCLENBQUM7SUFFRCxPQUFPO1FBQ0wsUUFBUTtRQUNSLG9CQUFvQjtRQUNwQixTQUFTO0tBQ1YsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBtZXJnZSxcbiAgT2JzZXJ2YWJsZSxcbiAgcXVldWVTY2hlZHVsZXIsXG4gIFNjaGVkdWxlckxpa2UsXG4gIFN1YmplY3QsXG4gIFN1YnNjcmliYWJsZSxcbiAgU3Vic2NyaXB0aW9uLFxufSBmcm9tICdyeGpzJztcbmltcG9ydCB7IG1lcmdlQWxsLCBvYnNlcnZlT24gfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTaWRlRWZmZWN0T2JzZXJ2YWJsZTxUPihcbiAgc3RhdGVPYnNlcnZhYmxlcyA9IG5ldyBTdWJqZWN0PE9ic2VydmFibGU8VD4+KCksXG4gIHNjaGVkdWxlcjogU2NoZWR1bGVyTGlrZSB8IG51bGwgPSBxdWV1ZVNjaGVkdWxlcixcbik6IHtcbiAgZWZmZWN0cyQ6IE9ic2VydmFibGU8VD47XG4gIG5leHRFZmZlY3RPYnNlcnZhYmxlOiAoZWZmZWN0JDogT2JzZXJ2YWJsZTxUPikgPT4gdm9pZDtcbiAgc3Vic2NyaWJlOiAoKSA9PiBTdWJzY3JpcHRpb247XG59ICYgU3Vic2NyaWJhYmxlPFQ+IHtcbiAgY29uc3QgZWZmZWN0cyQ6IE9ic2VydmFibGU8VD4gPSBtZXJnZShcbiAgICBzdGF0ZU9ic2VydmFibGVzLnBpcGUoXG4gICAgICBtZXJnZUFsbCgpLFxuICAgICAgc2NoZWR1bGVyID8gb2JzZXJ2ZU9uKHNjaGVkdWxlcikgOiAobyQpID0+IG8kLFxuICAgICksXG4gICk7XG5cbiAgZnVuY3Rpb24gbmV4dEVmZmVjdE9ic2VydmFibGUoZWZmZWN0JDogT2JzZXJ2YWJsZTxUPik6IHZvaWQge1xuICAgIHN0YXRlT2JzZXJ2YWJsZXMubmV4dChlZmZlY3QkKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN1YnNjcmliZSgpOiBTdWJzY3JpcHRpb24ge1xuICAgIHJldHVybiBlZmZlY3RzJC5zdWJzY3JpYmUoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZWZmZWN0cyQsXG4gICAgbmV4dEVmZmVjdE9ic2VydmFibGUsXG4gICAgc3Vic2NyaWJlLFxuICB9O1xufVxuIl19